bundle:
  name: banking_default_model_bundle

workspace:
  host: https://dbc-64239bfe-e47d.cloud.databricks.com
  file_path: /Workspace/Users/${workspace.current_user.userName}/.src/${src.name}/${src.target}/files

sync:
  include:
    - "*.yml"
    - "notebooks/*.ipynb"
    - "notebooks/*.py"

targets:
  default:
    mode: development
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.srx/${src.name}/${src.target}

resources:
  jobs:
    Banking_Model_Register:
      name: Banking_Model_Register
      tasks:
        - task_key: register_model
          description: "Registers the latest MLflow run into the model registry"
          notebook_task:
            notebook_path: ${workspace.file_path}/src/ModelRegistry.ipynb
            source: WORKSPACE
          timeout_seconds: 1800
          # No cluster config - will use serverless automatically

    Banking_Default_Inference:
      name: Banking_Default_Inference
      tasks:
        - task_key: inference
          description: "Runs batch inference using the champion model"
          notebook_task:
            notebook_path: ${workspace.file_path}/src/Deploy.ipynb
            source: WORKSPACE
          timeout_seconds: 3600
          # No cluster config - will use serverless automatically
      schedule:
        quartz_cron_expression: "0 0 9 * * ?"
        timezone_id: Pacific/Auckland